<html>
  <head>
    <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> -->
    <script src="http://d3js.org/d3.v2.min.js?2.9.1"></script>
    <script src="sankey.js"></script>
  </head>
  <title>Riemann Looking-glass</title>
  <body>
    <div id="content">
      <h1>Looking glass</h1>
      <p id="chart">
    </div>
  </body>
</html>
<script type="text/javascript" src="looking_glass.js?1"></script>
<link href="style.css" rel="stylesheet" type="text/css"></link>
<script>
  looking_glass.init(d3.select("#chart"));
  //looking_glass.init_flow(d3.select("#chart"));

  var host = "nisse.lefant.net:5556";
  looking_glass.subscribe(host, 'host =~ "%"', function(event) {
    var key = event.host + '+' + event.service;
    //var value = event.state + '+' + event.metric;
    var value = event.metric;
    //console.log('dev: ', key, value);
    return { 'key': key, 'value': value };
  });

  <!-- setInterval(function() { -->
  <!--   looking_glass.render_flow(); -->
  <!-- }, 5000); -->
  setInterval(function() {
    looking_glass.render();
  }, 1000);
</script>
