<html>
  <head>
    <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> -->
    <script src="http://d3js.org/d3.v2.min.js?2.9.1"></script>
  </head>
  <title>Riemann Looking-glass</title>
  <body>
    <div id="content">
      <h1>Looking glass</h1>
      <p id="chart">
    </div>
  </body>
</html>
<script type="text/javascript" src="looking_glass.js?1"></script>
<link href="style.css" rel="stylesheet" type="text/css"></link>
<script>
  looking_glass.init(d3.select("#chart"));

  var host = "nisse.lefant.net:5556";
  //looking_glass.subscribe(host, 'service =~ "%cpu%"', function(event) {
  looking_glass.subscribe(host, 'host =~ "%nisse%"', function(event) {
    var key = event.host + '+' + event.service;
    //var value = event.state + '+' + event.metric;
    var value = event.metric;
    console.log('nisse: ', key, value);
    return { 'key': key, 'value': value };
  });
  looking_glass.subscribe(host, 'host =~ "%icebox%"', function(event) {
    var key = event.host + '+' + event.service;
    var value = event.metric;
    console.log('icebox: ', key, value);
    return { 'key': key, 'value': value };
  });
</script>
